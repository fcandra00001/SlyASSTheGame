<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Jo Ken Po ‚Äî Sly Ass</title>

  <!-- playful rounded font from Google -->
  <link href="https://fonts.googleapis.com/css2?family=Fredoka+One&display=swap" rel="stylesheet">

  <style>
    :root{
      --glass-bg: rgba(255,255,255,0.86);
      --glass-border: rgba(255,255,255,0.18);
      --accent:#3b82f6;
      --text:#0b1220;
      --muted:rgba(11,18,32,0.6);
    }
    *{box-sizing:border-box}
    html,body{height:100%;margin:0;font-family: 'Fredoka One', system-ui, -apple-system, 'Segoe UI', Roboto, 'Helvetica Neue', Arial; background:#000;color:var(--text);-webkit-font-smoothing:antialiased}

    /* background video */
    .bg-video{position:fixed;inset:0;z-index:0;overflow:hidden;pointer-events:none}
    .bg-video video{min-width:100%;min-height:100%;object-fit:cover;object-position:center center;filter:brightness(0.48) contrast(1.05) saturate(1.03);}
    .bg-video::after{content:'';position:absolute;inset:0;background:linear-gradient(180deg, rgba(0,0,0,0.18), rgba(0,0,0,0.36));}

    .app{position:relative;z-index:2;min-height:100vh;display:flex;flex-direction:column;align-items:center;justify-content:flex-start;padding:18px}

    header{width:100%;max-width:1200px;display:flex;align-items:center;justify-content:space-between;margin-bottom:12px}
    .title{display:flex;flex-direction:column;gap:4px;color:var(--glass-bg);text-shadow:0 8px 28px rgba(0,0,0,0.6)}
    h1{margin:0;font-size:28px;letter-spacing:1px}
    .subtitle{font-size:12px;opacity:.95}

    .controls{display:flex;gap:10px;align-items:center}
    .btn-ghost{display:inline-flex;align-items:center;gap:8px;padding:10px 14px;border-radius:999px;border:1px solid rgba(255,255,255,0.12);background:linear-gradient(180deg, rgba(255,255,255,0.02), rgba(255,255,255,0.03));color:var(--glass-bg);cursor:pointer;font-weight:700}
    .btn-ghost .dog{font-size:18px}

    .arena-wrap{width:100%;max-width:1200px;display:flex;gap:18px}

    /* battle card (glass) */
    .arena{flex:1;min-height:640px;border-radius:18px;background:linear-gradient(180deg, rgba(255,255,255,0.10), rgba(255,255,255,0.06));backdrop-filter: blur(10px) saturate(1.05);box-shadow:0 22px 70px rgba(2,6,23,0.65);border:1px solid rgba(255,255,255,0.04);position:relative;overflow:hidden;padding:14px;display:flex;flex-direction:column;align-items:center}
    .arena-inner{position:relative;flex:1;width:100%;border-radius:12px;background:rgba(255,255,255,0.012);overflow:hidden;border:1px solid rgba(255,255,255,0.02);display:block;margin-top:8px}

    .piece-btns{display:flex;gap:10px;justify-content:center;margin-top:6px}
    .piece-btn{background:rgba(255,255,255,0.03);border:1px solid rgba(255,255,255,0.06);padding:12px 18px;border-radius:12px;cursor:pointer;font-size:18px;color:var(--glass-bg);backdrop-filter: blur(4px);}
    .piece-btn.active{box-shadow:0 12px 36px rgba(0,0,0,0.28);transform:translateY(-4px)}

    /* HUD: transparent base, rainbow aura kept */
    .hud{width:320px;min-width:240px;display:flex;flex-direction:column;gap:12px}

    .fancy-hud{position:relative;padding:14px;border-radius:14px;overflow:visible;background:rgba(255,255,255,0.06);backdrop-filter:blur(8px) saturate(1.04);border:1px solid rgba(255,255,255,0.08);box-shadow:0 18px 40px rgba(2,6,23,0.18);}
    .fancy-hud::before{content:'';position:absolute;inset:-6px;background:linear-gradient(90deg,#ff6b6b,#ffd166,#8ecae6,#a0e7a0,#c77dff,#ffd6a5);background-size:300% 300%;filter:blur(14px);opacity:0.55;z-index:-2;border-radius:16px;animation:rainbow 9s linear infinite;}
    .fancy-hud::after{content:'';position:absolute;inset:0;border-radius:12px;z-index:-1;background:linear-gradient(180deg, rgba(255,255,255,0.04), rgba(255,255,255,0.08));mix-blend-mode:overlay;}
    @keyframes rainbow{0%{background-position:0% 50%}50%{background-position:100% 50%}100%{background-position:0% 50%}}

    .counts{display:flex;gap:8px;align-items:center;justify-content:space-between}

    /* pieces */
    .agent{position:absolute;user-select:none;touch-action:none;font-size:22px;width:40px;height:40px;display:flex;align-items:center;justify-content:center;border-radius:10px;transition:transform .12s ease, box-shadow .12s ease}
    .agent.rock{font-size:24px}
    .agent.paper{font-size:20px}
    .agent.scissors{font-size:20px}

    /* conversion flash (subtle) */
    @keyframes convertFlash{0%{box-shadow:0 0 0px rgba(255,255,255,0)}30%{box-shadow:0 8px 28px rgba(255,255,255,0.9)}100%{box-shadow:0 0 0px rgba(255,255,255,0)}}
    .agent.convert{animation:convertFlash 420ms ease-out}

    /* HUD choice contrast */
    #playerChoiceDisplay{background:linear-gradient(90deg, rgba(0,0,0,0.65), rgba(0,0,0,0.5));color:white;padding:8px 10px;border-radius:10px}

    /* winner title style: Mario-like star yellow with glow and transparent shine */
    .victory-title{font-size:18px;font-weight:900;padding:6px 12px;border-radius:10px;display:inline-block;color:#ffd54a;background:linear-gradient(180deg, rgba(255,213,74,0.95), rgba(255,230,120,0.65));box-shadow:0 10px 30px rgba(255,200,60,0.12), inset 0 1px 0 rgba(255,255,255,0.35);text-shadow:0 2px 0 rgba(0,0,0,0.15);position:relative;overflow:visible;filter:drop-shadow(0 8px 24px rgba(255,200,60,0.18));}
    .victory-title::after{content:'‚ú∂';position:absolute;right:-10px;top:-10px;font-size:14px;opacity:0.9;color:rgba(255,250,210,0.95);transform:rotate(18deg);animation:starPop 1600ms infinite;}
    .victory-title::before{content:'‚ú∂';position:absolute;left:-12px;bottom:-10px;font-size:12px;opacity:0.85;color:rgba(255,245,180,0.95);transform:rotate(-12deg);animation:starPop 1300ms infinite 200ms;}
    @keyframes starPop{0%{transform:scale(.6) rotate(0);opacity:0}40%{transform:scale(1.06) rotate(20deg);opacity:1}100%{transform:scale(.9) rotate(40deg);opacity:0}}

    /* loser title: same yellow + rainbow halo like HUD */
    .loser-title{font-size:18px;font-weight:900;padding:6px 12px;border-radius:10px;display:inline-block;color:#ffd54a;position:relative;overflow:visible;text-shadow:0 2px 0 rgba(0,0,0,0.15);filter:drop-shadow(0 8px 20px rgba(0,0,0,0.15));}
    .loser-title::before{content:'';position:absolute;inset:-6px;background:linear-gradient(90deg,#ff6b6b,#ffd166,#8ecae6,#a0e7a0,#c77dff,#ffd6a5);background-size:300% 300%;filter:blur(12px);opacity:0.6;z-index:-2;border-radius:14px;animation:rainbow 9s linear infinite;}
    .loser-title .star{font-size:12px;margin:0 6px;color:rgba(255,250,210,0.95);}

    /* confetti */
    .confetti{position:absolute;inset:0;pointer-events:none;z-index:6}
    .confetti .piece{position:absolute;border-radius:2px;opacity:0.95;animation:fall 1800ms linear forwards}
    @keyframes fall{from{transform:translateY(-20vh) rotate(0)} to{transform:translateY(120vh) rotate(720deg);opacity:0}}

    footer{margin-top:16px;color:rgba(255,255,255,0.9);font-size:12px}

    @media(max-width:1000px){.arena-wrap{flex-direction:column}.hud{width:100%}.arena{min-height:520px}}
    @media(max-width:560px){h1{font-size:18px}.agent{width:28px;height:28px;font-size:16px}}
  </style>
</head>
<body>

  <div class="bg-video">
    <video id="bgVideo" autoplay muted loop playsinline>
      <source src="assets/video/01.mp4" type="video/mp4">
    </video>
  </div>

  <div class="app">
    <header>
      <div class="title">
        <h1>Jo Ken Po ‚Äî Sly Ass</h1>
        <div class="subtitle">Pick Rock, Paper or Scissors ‚Äî I hope you smile Sly Ass</div>
      </div>

      <div class="controls">
        <div class="badge">
          <div class="stat" id="playerChoiceDisplay">Choice: ‚Äî</div>
        </div>
        <button class="btn-ghost" id="restartBtn"><span class="dog">üê∂</span> Restart</button>
        <button class="btn-ghost" id="startBtn"><span class="dog">üêï</span> Start</button>
      </div>
    </header>

    <main class="arena-wrap">
      <section class="arena" aria-label="Battle arena">
        <div style="display:flex;gap:8px;align-items:center;justify-content:center;width:100%">
          <div class="piece-btns">
            <button class="piece-btn" data-piece="rock">ü™® Rock</button>
            <button class="piece-btn" data-piece="paper">üìÑ Paper</button>
            <button class="piece-btn" data-piece="scissors">‚úÇÔ∏è Scissors</button>
          </div>
        </div>

        <div class="arena-inner" id="arenaInner">
          <!-- agents injected here -->
          <div class="confetti" id="confetti"></div>
        </div>
      </section>

      <aside class="hud">
        <div class="fancy-hud">
          <div style="display:flex;justify-content:space-between;align-items:center">
            <strong>Battle Progress</strong>
            <div id="timer">00:00</div>
          </div>
          <div class="counts" style="margin-top:10px">
            <div><div class="stat">ü™® Rock: <span id="countRock">0</span></div></div>
            <div><div class="stat">üìÑ Paper: <span id="countPaper">0</span></div></div>
            <div><div class="stat">‚úÇÔ∏è Scissors: <span id="countScissors">0</span></div></div>
          </div>

          <div style="margin-top:10px;display:flex;justify-content:space-between;align-items:center">
            <div class="stat">Your score: <strong id="playerScore">0</strong></div>
            <div class="stat">Pieces left: <strong id="piecesLeft">0</strong></div>
          </div>
        </div>

        <div class="card" id="hudModal" style="display:block">
          <!-- End message appears here so it doesn't cover the arena -->
          <div id="endMessageInner" style="text-align:center"></div>
        </div>
      </aside>
    </main>

    <footer>Designed for Sly Ass by another Sly Ass.</footer>
  </div>

  <!--
    ASSETS (comment): place your media files in the project folder:
    - background video: assets/video/01.mp4
    - background audio/music: assets/audio/01.mp3
    The music will attempt autoplay; if the browser blocks autoplay with sound it will start when the user clicks Start.
  -->

  <script>
    /* ====== Config ====== */
    // Arkanoid / Pong style dynamics: faster, more bounce, deterministic conversion with cooldown to avoid rapid chain conversions
    const TOTAL_PER_TYPE = 14; // number per type
    const AGENT_SIZE = 40;
    const P_CONVERT = 1.0; // deterministic conversion when rule applies
    const CONVERT_COOLDOWN = 420; // ms ‚Äî prevents immediate repeated conversions on same agent
    const NUDGE_TIMEOUT = 22000; // gentle nudge after 22s with no conversions

    const EMOJI = { rock: 'ü™®', paper: 'üìÑ', scissors: '‚úÇÔ∏è' };
    const BEATS = { rock: 'scissors', scissors: 'paper', paper: 'rock' };

    /* ====== Elements & state ====== */
    const arenaInner = document.getElementById('arenaInner');
    const startBtn = document.getElementById('startBtn');
    const restartBtn = document.getElementById('restartBtn');
    const pieceBtns = document.querySelectorAll('.piece-btn');
    const playerChoiceDisplay = document.getElementById('playerChoiceDisplay');
    const countRockEl = document.getElementById('countRock');
    const countPaperEl = document.getElementById('countPaper');
    const countScissorsEl = document.getElementById('countScissors');
    const playerScoreEl = document.getElementById('playerScore');
    const piecesLeftEl = document.getElementById('piecesLeft');
    const timerEl = document.getElementById('timer');
    const confetti = document.getElementById('confetti');
    const endMessageInner = document.getElementById('endMessageInner');

    let playerChoice = null; let agents = []; let running = false; let lastTime = null; let startTime = null; let rafId = null; let playerScore = 0; let lastConversionAt = 0;
    // chaos variables for "near-end" unpredictability
    let chaosStarted = false; let lastChaosAt = 0; const chaosDuration = 18000; // ms of chaos once triggered

    // background audio (music) - will try autoplay
    const music = new Audio('assets/audio/01.mp3'); music.loop = true; music.preload = 'auto'; music.volume = 0.66;
    function tryPlayMusic(){ try{ music.currentTime = 0; const p = music.play(); if(p && p.then) p.catch(()=>{}); }catch(e){} }

    /* ====== UI helpers ====== */
    function setPlayerChoice(type){ playerChoice = type; playerChoiceDisplay.textContent = 'Choice: ' + (type ? (EMOJI[type] + ' ' + capitalize(type)) : '‚Äî'); pieceBtns.forEach(b=>b.classList.toggle('active', b.dataset.piece===type)); }
    pieceBtns.forEach(b=>{ b.addEventListener('click', ()=>setPlayerChoice(b.dataset.piece)); b.addEventListener('touchstart', ()=>setPlayerChoice(b.dataset.piece)); });
    restartBtn.addEventListener('click', resetGame);

    startBtn.addEventListener('click', ()=>{ if(!playerChoice){ alert('Please pick a piece before starting.'); return; } if(running) return; resetArena(); spawnAgents(); startBattle(); tryPlayMusic(); });

    function resetGame(){ stopBattle(); clearArena(); setPlayerChoice(null); playerScore = 0; updateHUD(); endMessageInner.innerHTML=''; confetti.innerHTML=''; chaosStarted=false; }
    function resetArena(){ clearArena(); agents = []; playerScore = 0; updateHUD(); lastConversionAt = performance.now(); chaosStarted=false; }
    function clearArena(){ cancelAnimationFrame(rafId); arenaInner.querySelectorAll('.agent').forEach(n=>n.remove()); agents = []; running=false; lastTime=null; startTime=null; rafId=null; }

    /* ====== Spawn & physics (pong/arkanoid bounce) ====== */
    function spawnAgents(){
      const rect = arenaInner.getBoundingClientRect(); const centerX = rect.width/2; const centerY = rect.height/2;
      function randAroundCenter(range=280){ return { x: centerX + (Math.random()*2-1)*range, y: centerY + (Math.random()*2-1)*range }; }

      function spawn(type, n){
        for(let i=0;i<n;i++){
          const pos = randAroundCenter(280);
          const el = document.createElement('div'); el.className = 'agent '+type; el.dataset.type = type; el.style.left = (pos.x)+'px'; el.style.top = (pos.y)+'px'; el.innerText = EMOJI[type]; arenaInner.appendChild(el);
          // arkanoid/pong-like velocities: more horizontal, more bounce
          const baseSpeed = 1.2 + Math.random()*2.6; // px/sec (slightly faster)
          // angle biased to give variety
          const angle = Math.random()*Math.PI*2; agents.push({el, x:pos.x, y:pos.y, vx:Math.cos(angle)*baseSpeed, vy:Math.sin(angle)*baseSpeed, r:AGENT_SIZE/2, type, nextConvertAllowed:0});
        }
      }

      spawn('rock', TOTAL_PER_TYPE); spawn('paper', TOTAL_PER_TYPE); spawn('scissors', TOTAL_PER_TYPE);
      updateHUD(); lastConversionAt = performance.now();
    }

    function startBattle(){ running = true; startTime = performance.now(); lastTime = startTime; rafId = requestAnimationFrame(loop); }
    function stopBattle(){ running=false; cancelAnimationFrame(rafId); }

    function loop(t){ const dt = Math.min(0.06,(t-lastTime)/1000); lastTime = t; timerEl.textContent = new Date(Math.floor((t-startTime)/1000)*1000).toISOString().substr(14,5); updateAgents(dt); rafId = requestAnimationFrame(loop); checkEndCondition(); }

    function updateAgents(dt){
      const rect = arenaInner.getBoundingClientRect(); const w = rect.width; const h = rect.height;

      for(let a of agents){
        // remove vertical gravity for pong-like behavior; keep tiny wobble
        a.vx += (Math.sin((a.x + a.y + performance.now()/1200) * 0.001) * 0.02);

        a.x += a.vx*dt; a.y += a.vy*dt;

        // elastic wall bounce (top/bottom/left/right) - more dynamic
        if(a.x < 8){ a.x = 8; a.vx = Math.abs(a.vx) * 0.96 + 0.02; }
        if(a.x > w - 40){ a.x = w-40; a.vx = -Math.abs(a.vx) * 0.96 - 0.02; }
        if(a.y < 8){ a.y = 8; a.vy = Math.abs(a.vy) * 0.96 + 0.02; }
        if(a.y > h - 40){ a.y = h-40; a.vy = -Math.abs(a.vy) * 0.96 - 0.02; }

        // small slow-down friction
        a.vx *= 0.9996; a.vy *= 0.9996;

        // clamp velocities so collisions don't explode
        a.vx = Math.max(-3.6, Math.min(3.6, a.vx));
        a.vy = Math.max(-3.6, Math.min(3.6, a.vy));
      }

      let anyConversion = false;
      // collision loop ‚Äî use elastic response + deterministic RPS transform, with cooldown per agent
      for(let i=0;i<agents.length;i++){
        for(let j=i+1;j<agents.length;j++){
          const A = agents[i]; const B = agents[j]; const dx = A.x - B.x; const dy = A.y - B.y; const dist2 = dx*dx + dy*dy; const minDist = (AGENT_SIZE - 6);
          if(dist2 < minDist*minDist){
            const dist = Math.sqrt(dist2) || 0.0001; const nx = dx/dist, ny = dy/dist; const overlap = (minDist - dist)/2;
            // separate
            A.x += nx*overlap; A.y += ny*overlap; B.x -= nx*overlap; B.y -= ny*overlap;

            // elastic collision (approx): swap velocity components along normal using restitution
            const restitution = 0.92;
            const relVel = (A.vx - B.vx)*nx + (A.vy - B.vy)*ny;
            const jimp = -(1 + restitution) * relVel * 0.5; // scaled
            const jx = jimp * nx; const jy = jimp * ny;
            A.vx += jx; A.vy += jy; B.vx -= jx; B.vy -= jy;

            // tiny tangential random to avoid perfect sticking
            const tang = 0.06 * (Math.random()-0.5);
            A.vx += -ny * tang; A.vy += nx * tang; B.vx += ny * tang; B.vy += -nx * tang;

            // enforce deterministic RPS with cooldown
            const now = performance.now();
            if(A.type !== B.type){
              if(now > B.nextConvertAllowed && BEATS[A.type] === B.type){
                convertAgent(B, A.type, A); B.nextConvertAllowed = now + CONVERT_COOLDOWN; anyConversion = true; if(A.type === playerChoice) playerScore++; }
              else if(now > A.nextConvertAllowed && BEATS[B.type] === A.type){
                convertAgent(A, B.type, B); A.nextConvertAllowed = now + CONVERT_COOLDOWN; anyConversion = true; if(B.type === playerChoice) playerScore++; }
            }
          }
        }
      }

      if(anyConversion) lastConversionAt = performance.now();
      const now = performance.now();
      // near-end chaos trigger: when few pieces remain, add random impulses for unpredictability
      if(!chaosStarted && agents.length <= 10 && agents.length > 1){ chaosStarted = true; lastChaosAt = now; }
      if(chaosStarted && now - lastChaosAt < chaosDuration){
        // apply small randomized impulses at intervals
        if(now - lastChaosAt > 600){
          for(let k=0;k<Math.min(6, agents.length);k++){ const a = agents[Math.floor(Math.random()*agents.length)]; a.vx += (Math.random()*2-1) * 2.2; a.vy += (Math.random()*2-1) * 2.2; }
          lastChaosAt = now - (chaosDuration - (now - lastChaosAt)); // keep chaos pulses spaced
        }
      }

      if(now - lastConversionAt > NUDGE_TIMEOUT){
        for(let k=0;k<Math.min(10, agents.length);k++){ const a = agents[Math.floor(Math.random()*agents.length)]; a.vx += (Math.random()*2-1) * 1.6; a.vy += (Math.random()*2-1) * 1.6; }
        lastConversionAt = now;
      }

      for(let a of agents){ a.el.style.left = (a.x - (AGENT_SIZE/2)) + 'px'; a.el.style.top = (a.y - (AGENT_SIZE/2)) + 'px'; }
      updateHUD();
    }

    function convertAgent(target, newType, sourceAgent){
      if(target.type === newType) return;
      target.type = newType; target.el.dataset.type = newType; target.el.className = 'agent ' + newType + ' convert'; target.el.innerText = EMOJI[newType];
      // visual flash
      try{ target.el.animate([
        {boxShadow: '0 0 0px rgba(255,255,255,0)'},
        {boxShadow: '0 14px 46px rgba(255,255,255,0.95)'},
        {boxShadow: '0 0 0px rgba(255,255,255,0)'}
      ],{duration:320,easing:'ease-out'});
      }catch(e){}
      // small kickoff away from source for clarity
      if(sourceAgent){ target.vx = (sourceAgent.vx*0.4) + (Math.random()*0.8 - 0.4); target.vy = (sourceAgent.vy*0.4) + (Math.random()*0.8 - 0.4); }
      setTimeout(()=>{ if(target && target.el) target.el.classList.remove('convert'); },480);
    }

    function updateHUD(){ const counts = {rock:0,paper:0,scissors:0}; for(let a of agents) counts[a.type]++; countRockEl.textContent = counts.rock; countPaperEl.textContent = counts.paper; countScissorsEl.textContent = counts.scissors; playerScoreEl.textContent = playerScore; piecesLeftEl.textContent = agents.length; }

    function checkEndCondition(){ const typesPresent = new Set(agents.map(a=>a.type)); if(typesPresent.size === 1 && agents.length>0){ stopBattle(); const winner = [...typesPresent][0]; const playerWon = (playerChoice === winner); showEndMessage(playerWon, winner); } }

    function showEndMessage(playerWon, winnerType){
      let titleHTML = '';
      if(playerWon){ titleHTML = `<div class='victory-title'>Congratulations sly ass ‚Äî you chose well!</div>`; }
      else { titleHTML = `<div class='loser-title'><span class='star'>‚ú∂</span>Not this time sly ass ‚Äî try again.<span class='star'>‚ú∂</span></div>`; }
      endMessageInner.innerHTML = `${titleHTML}<div style=\"margin:10px 0;color:rgba(255,230,120,0.98)\">Winner: ${EMOJI[winnerType]} ${capitalize(winnerType)}</div><div><button class='btn-ghost' id='playAgain'><span class='dog'>üê∂</span> Restart</button></div>`;
      document.getElementById('playAgain').addEventListener('click', ()=>{ resetGame(); });
      launchConfetti(playerWon ? 120 : 36);
      const hud = document.querySelector('.fancy-hud'); hud.animate([{transform:'scale(1)'},{transform:'scale(1.01)'},{transform:'scale(1)'}],{duration:700,easing:'ease-out'});
    }

    function launchConfetti(n){ confetti.innerHTML=''; const colors = ['#ff4d4f','#ffb703','#8ecae6','#a0e7a0','#c77dff','#ffd6a5']; for(let i=0;i<n;i++){ const el = document.createElement('div'); el.className = 'piece'; el.style.left = Math.random()*100 + '%'; el.style.top = (-5 - Math.random()*20) + 'vh'; el.style.background = colors[Math.floor(Math.random()*colors.length)]; el.style.transform = 'rotate(' + (Math.random()*360) + 'deg)'; el.style.width = (6 + Math.random()*12) + 'px'; el.style.height = (10 + Math.random()*18) + 'px'; el.style.animationDuration = (1600 + Math.random()*1200) + 'ms'; confetti.appendChild(el); } setTimeout(()=>{ confetti.innerHTML=''; },5200); }

    function capitalize(s){ return s.charAt(0).toUpperCase() + s.slice(1); }

    // init
    setPlayerChoice(null);
    window.addEventListener('resize', ()=>{ const rect = arenaInner.getBoundingClientRect(); for(let a of agents){ a.x = Math.max(8, Math.min(rect.width-32, a.x)); a.y = Math.max(8, Math.min(rect.height-32, a.y)); } });
    window.addEventListener('load', ()=>{ tryPlayMusic(); });
  </script>
</body>
</html>
